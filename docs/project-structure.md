# 项目结构设计规范

## 设计目标

- 一个项目对应一个独立文件夹，拥有`lingo/project.json`就是一个项目
- 结构简洁、易读、可直接编辑，适合开发者和翻译人员日常维护。
- 支持多语言文案的快速新增、删除与批量维护，改动范围尽量局部化。
- 保存项目元数据，并保持扩展空间与良好性能。

## 目录总览

```
项目根目录/
  lingo/
    manifest.json         # 全局概览：启用语言、模块、版本信息
    project.json          # 项目配置：名称、描述、负责人、标签等
  locales/
    keys.json             # 统一键注册表与元数据
    [languageDir]/          # 语言目录（BCP 47规范标签）
       messages.json      # 文案文件
```



## 核心文件与目录说明

- `manifest.json`
  - 记录项目唯一标识、版本、默认语言、启用语言列表、模块集合等核心元信息。
  - 删除语言时，只需先在此文件中移除对应语言，后续清理即可定位到具体文件。

- `project.json`
  - 存储项目描述性配置，如项目名称、负责人、关联仓库、标签、自定义字段等。
  - 可选地包含一些全局开关（例如是否启用机器翻译、校验策略）。

- `locales/`
  - `keys.json`：集中维护所有文案键及其元数据（描述、标签、默认模块、上下文、是否弃用等）。
  - `[languageDir]/messages.json`：每种语言一个目录，内部目前只包含messages文件
    - 文案内容使用扁平键值（`{ "user.login": "登录" }`）

## 语言与键管理策略

- **混合方案（推荐）**：
  - 文案键统一注册在 `keys.json`，保证键集合一致，新增键时只修改此文件。
  - 每种语言自己的目录下维护对应的翻译值，避免大型单文件造成的冲突和性能问题。
  - 删除语言时，仅需删除该语言目录及清单；保留 `keys.json` 不受影响。

- **命名空间划分**：
  - 通过 `<namespace>.json` 控制文件粒度，有利于团队分工、局部更新和 Git Diff 管理。
  - 建议保持命名空间名称与业务模块一致，并在 `keys.json` 中用 `module` 字段进行映射。


- **删除语言**：
  - 在 `manifest.json` 中移除语言标记，并更新 `progress.json`。
  - 清理 `locales/<language>/` 目录，确认无仍需保留的历史快照；必要时在 `snapshots/` 留存备份。

- **编辑体验**：
  - 命名规范统一（JSON 缩进 2 空格、键名使用小写点分结构等），确保 diff 易读。
  - 可为翻译人员提供只读的 `keys.json` 视图和可编辑的语言文件，避免误改键集合。

## 扩展与自动化建议

- 为 `keys.json`、语言文件建立 Schema（例如 JSON Schema），放置于 `.lingo/manifest.schema.json` 等位置，便于 IDE 校验。


## 命名与格式标准

- 语言目录使用 BCP 47 语言标签（如 `zh-Hans`、`en-US`）。
